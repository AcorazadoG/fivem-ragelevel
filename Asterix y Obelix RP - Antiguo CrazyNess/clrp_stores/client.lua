local hardwareStore = {
 [1] = {x = 2748.813, y = 3472.524, z = 55.677},
 [2] = {x = 194.498, y = -1764.46, z = 29.3428},
 [3] = {x = -551.7, y = -854.498, z = 28.2031},
 [4] = {x = -1387.99, y = -421.819, z = 36.6145},
}


local mainStores = {
  {x=373.875, y=325.896, z=102.566},
  {x=2557.458, y=382.282, z=107.622},
  {x=-3038.939, y=585.954, z=6.908},
  {x=-3241.927, y=1001.462, z=11.830},
  {x=547.431, y=2671.710, z=41.156},
  {x=1961.464, y=3740.672, z=31.343},
  {x=2678.916, y=3280.671, z=54.241},
  {x=1729.216, y=6414.131, z=34.037},
  {x=-1222.915, y=-906.983, z=11.326},
  {x=-1487.553, y=-379.107, z=39.163},
  {x=-2968.243, y=390.910, z=14.043},
  {x=1166.024, y=2708.930, z=37.157},
  {x=-48.519, y=-1757.514, z=28.421},
  {x=1163.373, y=-323.801, z=68.205},
 -- {x=-707.501, y=-914.260, z=18.215},
  {x=-1820.523, y=792.518, z=137.118},
  {x=1698.388, y=4924.404, z=41.063},
  {x=1135.808, y=-982.281, z=45.415},
  {x=26.251, y=-1347.580, z=28.507}
}

local mainDollar = {

  {x = 92.728, y = -229.835, z = 54.664}  

}

local mainStores1 = {

  {x = -705.429, y = -913.795, z = 18.150},
  {x = -700.267, y = -908.558, z = 23.764}  

}

local mainStores5 = {
  {x = 336.069, y = -591.441, z = 43.284}, 
  {x = 451.912, y = -973.161, z = 30.689}
}

 -- Pillbox Hospital
local hospital = {
  --{x = 316.847, y = -588.247, z = 42.292}
}

 -- Club Bars
local bars = {
  {x = -1393.578, y = -606.850, z = 29.320}, --Bahama Mamas Front
  {x = -1379.003, y = -627.857, z = 29.820}, --Bahama Mamas Rear
  {x = 128.880, y= -1281.376, z = 28.270}, --Vanilla Unicorn
  {x = -559.658, y = 286.457, z = 82.176-0.95},
  {x = 987.654, y = -95.247, z = 73.846}, -- Lost MC
  {x = -1.720, y = -1004.753, z = 141.066}, -- New Bar
  {x = -1576.525, y = -3017.196, z = -79.006}, -- Lost galacy  
  {x = -1584.849, y = -3012.953, z = -76.005}, -- Lost galacy 
  {x = -1608.873, y = -3019.014, z = -75.205}, -- Lost galacy 
  {x = 1983.062, y = 3053.596, z = 47.215}, -- Lost pj
  {x = 1983.062, y = 3053.596, z = 47.215},
  {x = 907.115, y = -926.428, z = 11.582}, 
  {x = 1110.827, y = 209.133, z = -49.440},  
}

local hardwareItems = {
 [1] = {name = 'Zip Ties', price = 1500, id = 74},
 [2] = {name = 'Cortador de cables', price = 1000, id = 75},
 [3] = {name = 'Repair Kit', price = 450, id = 6},
 [4] = {name = 'Ganzua', price = 350, id = 7},
 [5] = {name = 'Fertilizer', price = 25, id = 16}, 
 [6] = {name = 'Peso digital', price = 300, id = 113},
 [7] = {name = 'Bundle of Baggies', price = 4, id = 119}, 
 --[5] = {name = 'Caja de madera grande', price = 15000, id = 85},
 --[6] = {name = 'Caja de armas', price = 30000, id = 86},
 --[7] = {name = 'Radio', price = 10000, id = 90},
  [8] = {name = 'Caja', price = 15, id = 5},
}

local storeItems = {
 --[1] = {name = 'Caja de almacenaje', price = 6000, amount = 1, id = 2},
 --[2] = {name = 'Nevera', price = 2000, amount = 1, id = 51},
 [5] = {name = 'Prismaticos', price = 100, amount = 1, id = 8},
 [6] = {name = 'Kit de limpieza', price = 300, amount = 1, id = 11},
 [8] = {name = 'Botella de agua', price = 20, amount = 1, id = 13},
 [9] = {name = 'Lata coca cola', price = 15, amount = 1, id = 94},
 --[10] = {name = 'Taza de cafe', price = 10, amount = 1, id = 95},
 [11] = {name = 'Hamburguesa', price = 20, amount = 1, id = 14},
 [12] = {name = 'Cigarro', price = 50, amount = 2, id = 15},
 --[13] = {name = 'Mascara de oxigeno', price = 1200, amount = 1, id = 41},
}

local hospitalItems = {
 [1] = {name = 'Paraguas', price = 75, amount = 1, id = 12},
 [2] = {name = 'Botella de agua', price = 50, amount = 1, id = 13},
 [3] = {name = 'Hamburguesa', price = 50, amount = 1, id = 14},
 [4] = {name = 'Cigarro', price = 50, amount = 2, id = 15},
-- [5] = {name = 'Medkit', price = 5000, amount = 1, id = 9},
 [6] = {name = 'Vendaje', price = 150, amount = 1, id = 10},
 [7] = {name = 'Redbull', price = 100, amount = 1, id = 26},
 
}

local barshop = {
 [1] = {name = 'Cerveza', price = 100, amount = 1, id = 22},
 [2] = {name = 'Bourbon', price = 250, amount = 1, id = 23},
 [3] = {name = 'Scotch', price = 255, amount = 1, id = 24},
 [4] = {name = 'Vino', price = 200, amount = 1, id = 25},
 [5] = {name = 'Tequila', price = 280, amount = 1, id = 27},
 [6] = {name = 'Vodka', price = 280, amount = 1, id = 28},
 [7] = {name = 'Redbull', price = 100, amount = 1, id = 26},
}

local licenciaShop = {
 [1] = {name = 'Carnet de conducir', price = 20, amount = 1, id = 500},
 [2] = {name = 'Certificado medico', price = 20, amount = 1, id = 501},
 [3] = {name = 'Licencia de armas', price = 20, amount = 1, id = 502},
}

local tenderoShop = {
 [1] = {name = 'Caja de almacenaje', price = 50, amount = 1, id = 2},
 --[2] = {name = 'Nevera', price = 1000, amount = 1, id = 51},
 [5] = {name = 'Prismaticos', price = 50, amount = 1, id = 8},
 [6] = {name = 'Kit de limpieza', price = 50, amount = 1, id = 11},
 [8] = {name = 'Botella de agua', price = 3, amount = 1, id = 13},
-- [9] = {name = 'Lata coca cola', price = 3, amount = 1, id = 258},
--[10] = {name = 'Taza de cafe', price = 5, amount = 1, id = 95},
 [11] = {name = 'Hamburguesa', price = 3, amount = 1, id = 14},
 [12] = {name = 'Cigarro', price = 15, amount = 2, id = 15},
 [13] = {name = 'Mascara de oxigeno', price = 750, amount = 1, id = 41},
 [13] = {name = 'Chuleta', price = 4, amount = 1, id = 38},
 [14] = {name = 'Sandwich Vegetal', price = 50, amount = 1, id = 106}, 
 [15] = {name = 'Hotdog', price = 3, amount = 1, id = 105},
 [16] = {name = 'Donuts', price = 10, amount = 1, id = 260},  
 [17] = {name = 'Cachopo', price = 10, amount = 1, id = 40}, 
 [18] = {name = 'IPhone X', price = 400, amount = 1, id = 72},
 [19] = {name = 'Samsung Galaxy S9', price = 400, amount = 1, id = 69}, 
 [20] = {name = 'Repair Kit', price = 350, amount = 1, id = 6}, 
 [21] = {name = 'Jerry Can', price = 500, amount = 1, id = 205},
}

local mainDollar1 = {
 [1] = {name = 'Jarra Pyrex', price = 10, amount = 1, id = 286},
 [2] = {name = 'Rollo film', price = 10, amount = 1, id = 179},
 [3] = {name = 'Peso Digital', price = 55, amount = 1, id = 113},
 [4] = {name = 'Peso Cocina', price = 30, amount = 1, id = 112}, 
}
---------------------------
Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('tendero', 'Tendero')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(mainStores1) do
  -- if(GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), v.x, v.y, v.z, true) < 25) and DecorGetInt(GetPlayerPed(-1), "Job") == 15 then
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 and DecorGetInt(GetPlayerPed(-1), "Job") == 23 then
    DrawMarker(27, v.x, v.y, v.z+0.10, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     drawTxt('~b~Pulse ~g~E~b~ Para comprar artículos')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('tendero')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('tendero') then
   for ind, v in pairs(tenderoShop) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('tendero', 'tendero')
    while true do
        local letSleep = true
        --if characterLoaded and GLOBAL_COORDS then
		  local coords = GetEntityCoords(GetPlayerPed(-1))

            for k, v in pairs(mainStores1) do
                local distance = #(coords - vector3(v.x, v.y, v.z))
                if distance < 5.0 then
                    letSleep = false
                    if distance < 1.5 then
                        if not showing then
						TriggerEvent('pw_drawtext:showNotification', { title = "TIENDA TENDERO", message = "Pulse [ <span class='text-danger'>E</span> ] Para comprar artículos", icon = "fas fa-shopping-basket" })
                            showing = k
                        end
                        if IsControlJustPressed(0, 38) then
                            --loadTattooMenu()
							WarMenu.OpenMenu('tendero')
                        end
                    else
                        if showing == k then
                            TriggerEvent('pw_drawtext:hideNotification')
                            showing = false
                            if inShop then
                                TriggerEvent('pw_interact:closeMenu')
                                inShop = false
                            end
                        end
                    end
                end
            --end
        end

        if letSleep then
            Citizen.Wait(500)
        else
            Citizen.Wait(1)
        end
    end
end)

--------------------------

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('licencia', 'Licencia')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(mainStores5) do
  -- if(GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), v.x, v.y, v.z, true) < 25) and DecorGetInt(GetPlayerPed(-1), "Job") == 15 then
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 or DecorGetInt(GetPlayerPed(-1), "Job") == 1 or DecorGetInt(GetPlayerPed(-1), "Job") == 2 then
    DrawMarker(27, v.x, v.y, v.z+0.10, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     drawTxt('~b~Pulse ~g~E~b~ para Licencia')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('licencia')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('licencia') then
   for ind, v in pairs(licenciaShop) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)
------------------------------------------
Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('hardwareStore', 'Hardware')
 while true do
  Wait(5)
  local coords = GetEntityCoords(PlayerPedId(), true)
  for k,v in pairs(hardwareStore) do
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 2.2 then
    --drawTxt('~b~Pulse ~g~E~b~ Para acceder a la ferretería')
    if IsControlJustPressed(0, 38) then
     WarMenu.OpenMenu('hardwareStore')
    end
   end
  end
  if WarMenu.IsMenuOpened('hardwareStore') then
   for id,v in pairs(hardwareItems) do 
    if WarMenu.Button(v.name, '~g~$'..v.price) then 
     TriggerServerEvent('store:purchase', v.id, v.name, v.price)
    end
   end
   WarMenu.Display()
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('hardwareStore', 'Hardware')
    while true do
        local letSleep = true
        --if characterLoaded and GLOBAL_COORDS then
		  local coords = GetEntityCoords(GetPlayerPed(-1))

            for k, v in pairs(hardwareStore) do
                local distance = #(coords - vector3(v.x, v.y, v.z))
                if distance < 5.0 then
                    letSleep = false
                    if distance < 1.5 then
                        if not showing then
						TriggerEvent('pw_drawtext:showNotification', { title = "FERRETERIA", message = "Pulse [ <span class='text-danger'>E</span> ] Para acceder a la ferretería", icon = "fas fa-shopping-basket" })
                            showing = k
                        end
                        if IsControlJustPressed(0, 38) then
                            --loadTattooMenu()
							WarMenu.OpenMenu('hardwareStore')
                        end
                    else
                        if showing == k then
                            TriggerEvent('pw_drawtext:hideNotification')
                            showing = false
                            if inShop then
                                TriggerEvent('pw_interact:closeMenu')
                                inShop = false
                            end
                        end
                    end
                end
            --end
        end

        if letSleep then
            Citizen.Wait(500)
        else
            Citizen.Wait(1)
        end
    end
end)
-----------------------------
Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('store', 'Store')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(mainStores) do
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 then
    DrawMarker(27, v.x, v.y, v.z+0.10, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     --drawTxt('~b~Pulse ~g~E~b~ Para comprar artículos')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('store')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('store') then
   for ind, v in pairs(storeItems) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('store', 'Store')
    while true do
        local letSleep = true
        --if characterLoaded and GLOBAL_COORDS then
		  local coords = GetEntityCoords(GetPlayerPed(-1))

            for k, v in pairs(mainStores) do
                local distance = #(coords - vector3(v.x, v.y, v.z))
                if distance < 5.0 then
                    letSleep = false
                    if distance < 1.5 then
                        if not showing then
						TriggerEvent('pw_drawtext:showNotification', { title = "TIENDA", message = "Pulse [ <span class='text-danger'>E</span> ] Para comprar artículos", icon = "fas fa-shopping-basket" })
                            showing = k
                        end
                        if IsControlJustPressed(0, 38) then
                            --loadTattooMenu()
							WarMenu.OpenMenu('store')
                        end
                    else
                        if showing == k then
                            TriggerEvent('pw_drawtext:hideNotification')
                            showing = false
                            if inShop then
                                TriggerEvent('pw_interact:closeMenu')
                                inShop = false
                            end
                        end
                    end
                end
            --end
        end

        if letSleep then
            Citizen.Wait(500)
        else
            Citizen.Wait(1)
        end
    end
end)

-----------------------------
Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('dollar', 'dollar')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(mainDollar) do
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 then
    DrawMarker(27, v.x, v.y, v.z+0.10, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     --drawTxt('~b~Pulse ~g~E~b~ Para comprar artículos')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('dollar')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('dollar') then
   for ind, v in pairs(mainDollar1) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('dollar', 'dollar')
    while true do
        local letSleep = true
        --if characterLoaded and GLOBAL_COORDS then
		  local coords = GetEntityCoords(GetPlayerPed(-1))

            for k, v in pairs(mainDollar) do
                local distance = #(coords - vector3(v.x, v.y, v.z))
                if distance < 5.0 then
                    letSleep = false
                    if distance < 1.5 then
                        if not showing then
						TriggerEvent('pw_drawtext:showNotification', { title = "DOLLAR PILLS", message = "Pulse [ <span class='text-danger'>E</span> ] Para comprar artículos", icon = "fas fa-shopping-basket" })
                            showing = k
                        end
                        if IsControlJustPressed(0, 38) then
                            --loadTattooMenu()
							WarMenu.OpenMenu('dollar')
                        end
                    else
                        if showing == k then
                            TriggerEvent('pw_drawtext:hideNotification')
                            showing = false
                            if inShop then
                                TriggerEvent('pw_interact:closeMenu')
                                inShop = false
                            end
                        end
                    end
                end
            --end
        end

        if letSleep then
            Citizen.Wait(500)
        else
            Citizen.Wait(1)
        end
    end
end)
-----------------
Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('Shop', 'Shop')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(hospital) do
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 then
    DrawMarker(27, v.x, v.y, v.z, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     drawTxt('~b~Pulse ~g~E~b~ Para comprar artículos')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('Shop')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('Shop') then
   for ind, v in pairs(hospitalItems) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('Bar', 'Bar')
 while true do
  Wait(5)
  local coords = GetEntityCoords(GetPlayerPed(-1))
  for k,v in pairs(bars) do
   if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 50 then
    DrawMarker(27, v.x, v.y, v.z, 0, 0, 0, 0, 0, 0, 1.0,1.0,0.5, 91, 144, 252, 150, 0, 0, 2, 0, 0, 0, 0)
    if GetDistanceBetweenCoords(coords, v.x, v.y, v.z, true) < 1.2 then
     drawTxt('~b~Press ~g~E~b~ To Open Bar')
     if IsControlJustPressed(0, 38) then
      WarMenu.OpenMenu('Bar')
     end
    end
   end
  end
  if WarMenu.IsMenuOpened('Bar') then
   for ind, v in pairs(barshop) do
    if WarMenu.Button(v.name, "~g~$"..v.price) then
     TriggerServerEvent('shops:purchase', v.name, v.price, v.amount, v.id)
    end
   end
   WarMenu.Display()
  end
 end
end)

local function round(num, idp)
  if idp and idp>0 then
    local mult = 10^idp
    return math.floor(num * mult + 0.5) / mult
  end
  return math.floor(num + 0.5)
end

-- Blips
Citizen.CreateThread(function()
 for k,v in ipairs(hardwareStore)do
  local blip = AddBlipForCoord(v.x, v.y, v.z)
  SetBlipSprite(blip, 544)
  SetBlipDisplay(blip, 4)
  SetBlipScale(blip, 1.0)
  SetBlipColour(blip, 51)
  SetBlipAsShortRange(blip, true)
  BeginTextCommandSetBlipName("STRING")
  AddTextComponentString("Ferretería")
  EndTextCommandSetBlipName(blip)
 end
 for k,v in ipairs(mainStores)do
  local blip = AddBlipForCoord(v.x, v.y, v.z)
  SetBlipSprite (blip, 52)
  SetBlipDisplay(blip, 4)
  SetBlipScale  (blip, 0.6)
  SetBlipColour (blip, 4)
  SetBlipAsShortRange(blip, true)
  BeginTextCommandSetBlipName("STRING")
  AddTextComponentString('Almacenar')
  EndTextCommandSetBlipName(blip)
 end
  for k,v in ipairs(mainStores1)do
  local blip = AddBlipForCoord(v.x, v.y, v.z)
  SetBlipSprite (blip, 439)
  SetBlipDisplay(blip, 4)
  SetBlipScale  (blip, 0.8)
  SetBlipColour (blip, 5)
  SetBlipAsShortRange(blip, true)
  BeginTextCommandSetBlipName("STRING")
  AddTextComponentString('Badulaque')
  EndTextCommandSetBlipName(blip)
 end
 
end)








----- NEW FOODS
local nearObject = false 
local isNearStand = false
local objectLoc = {}
local clostestProp = nil
local models = {
  [1] = 1129053052,
  [2] = -1581502570,
}

Citizen.CreateThread(function()
 while true do
  Citizen.Wait(1500)
  nearObject = false
  isNearStand = false
  local myCoords = GetEntityCoords(GetPlayerPed(-1))
   
  for i = 1, #models do
   clostestProp = GetClosestObjectOfType(myCoords.x, myCoords.y, myCoords.z, 3.5, models[i], false, false)
   if clostestProp ~= nil and clostestProp ~= 0 then
    local coords = GetEntityCoords(clostestProp)
    isNearStand = true
    objectLoc = {['x'] = coords.x, ['y'] = coords.y, ['z'] = coords.z + 1.2}
    break
   end
  end
 end
end)

Citizen.CreateThread(function()
 while true do
  Wait(5)
  if isNearStand then 
   if(GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), objectLoc.x, objectLoc.y, objectLoc.z, true) < 1.2) then
    drawTxt('~b~Pulse ~g~E~b~ Comprar hotdog [~g~$5~b~]')
    if IsControlJustPressed(0, 38) then
     TriggerServerEvent('shops:purchase', 'Hotdog', 5, 1, 93)
    end
   end
  end
 end
end)

-- Vending Machine


---------Vending Machines-----------

local nearObject = false 
local isNearObject = false
local objectLoc = {}
local clostestProp = nil
local models = {
  [1] = 690372739,
  [2] = 1114264700,
  [3] = 992069095,
}

local vendingshop = {
 [1] = {name = 'Botella de agua', price = 50, amount = 1, id = 13},
 [2] = {name = 'Lata coca cola', price = 70, amount = 1, id = 94},
 [5] = {name = 'Redbull', price = 200, amount = 1, id = 26},
}

Citizen.CreateThread(function()
 while true do
  Citizen.Wait(1500)
  nearObject = false
  isNearObject = false
  local myCoords = GetEntityCoords(GetPlayerPed(-1))
   
  for i = 1, #models do
   clostestProp = GetClosestObjectOfType(myCoords.x, myCoords.y, myCoords.z, 2.5, models[i], false, false)
   if clostestProp ~= nil and clostestProp ~= 0 then
    local coords = GetEntityCoords(clostestProp)
    isNearObject = true
    objectLoc = {['x'] = coords.x, ['y'] = coords.y, ['z'] = coords.z + 1.2}
    break
   end
  end
 end
end)

Citizen.CreateThread(function()
 WarMenu.CreateLongMenu('vending', 'Machine')
 while true do
  Wait(5)
  if isNearObject then 
   if(GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), objectLoc.x, objectLoc.y, objectLoc.z, true) < 1.5) then
    drawTxt('~b~Pulse ~g~E~b~ Para acceder a la máquina expendedora')
	--DrawText3DTest(-708.279, -909.990, 19.216, "~g~[E]~b~ Acceder a la máquina expendedora." )
    if IsControlJustPressed(0, 38) then
     WarMenu.OpenMenu('vending')
    end
  end
  if WarMenu.IsMenuOpened('vending') then
   for ind, v in pairs(vendingshop) do
    local price = math.floor(v.price)
    if WarMenu.Button(v.name, "~g~$"..price) then
     TriggerServerEvent('shops:purchase', v.name, price, v.amount, v.id)
    end
   end
   WarMenu.Display()
   end
  end
 end
end)

function DrawText3DTest(x,y,z, text)
    local onScreen,_x,_y=World3dToScreen2d(x,y,z)
    local px,py,pz=table.unpack(GetGameplayCamCoords())
    SetTextScale(0.35, 0.35)
    SetTextFont(4)
    SetTextProportional(1)
    SetTextColour(255, 255, 255, 215)

    SetTextEntry("STRING")
    SetTextCentre(1)
    AddTextComponentString(text)
    DrawText(_x,_y)
    local factor = (string.len(text)) / 370
    DrawRect(_x,_y+0.0125, 0.015+ factor, 0.03, 41, 11, 41, 68)
end